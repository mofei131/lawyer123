{"version":3,"sources":["uni-app:///main.js",null,"webpack:///G:/mofei/item/lawyer123/pages/my/login.vue?1c85","webpack:///G:/mofei/item/lawyer123/pages/my/login.vue?3773","webpack:///G:/mofei/item/lawyer123/pages/my/login.vue?59f2","uni-app:///pages/my/login.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,0F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AAC0N;AAC1N,gBAAgB,2NAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAw2B,CAAgB,q1BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiB53B;AACA,MADA,kBACA;AACA;AACA,oBADA;AAEA,gBAFA;AAGA,oBAHA;AAIA,qBAJA;AAKA,kBALA;AAMA,0DANA;AAOA,+BAPA;;AASA,GAXA;AAYA,QAZA,oBAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA;AACA;AACA;AACA;AACA;AACA,iBAFA,CAEA;AACA,eARA;AASA,kBATA,gBASA,GATA,EASA,EATA;;AAWA,WAZA,MAYA;AACA;AACA;AACA;AACA,SAlBA;;AAoBA;AACA,GA1CA;AA2CA,QA3CA,oBA2CA;;AAEA,GA7CA;AA8CA;AACA;AACA,mBAFA,2BAEA,CAFA,EAEA;AACA;AACA;AACA;AACA;AACA,oBADA;AAEA;AACA;AACA;AACA;AACA;AACA,aAFA,CAEA;AACA,WARA;AASA;AACA;AACA,WAXA;;AAaA,OAfA,MAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,CAEA;AACA,SARA,MAQA;AACA;AACA;AACA;AACA;AACA,KAlCA;AAmCA;AACA,SApCA,mBAoCA;AACA;AACA;AACA;AACA,0BADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WALA,MAKA;AACA;AACA;AACA;AACA,SAbA;;AAeA,KAtDA;AAuDA;AACA,kBAxDA,4BAwDA;AACA;AACA,uBADA;;AAGA;AACA;AACA,4BADA;AAEA,yCAFA;AAGA,2CAHA;AAIA,qCAJA;AAKA,iCALA;AAMA,yCANA;AAOA,uCAPA;AAQA,mBARA;;AAUA;AACA;AACA,KAzEA,EA9CA,E","file":"pages/my/login.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/my/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=ba7da882&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/my/login.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=template&id=ba7da882&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\博尧科技\\\\Desktop\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"page-login\">\n        <view v-if=\"canIUse||canIGetUserProfile\">\n           \n            <view class=\"login-box\">\n                 <!--新版登录方式-->\n                <button v-if=\"canIGetUserProfile\" class='login-btn' type='primary' @click=\"bindGetUserInfo\"> 授权登录 </button>\n                <!--旧版登录方式-->\n                <button v-else class='login-btn' type='primary' open-type=\"getUserInfo\" withCredentials=\"true\" lang=\"zh_CN\" @getuserinfo=\"bindGetUserInfo\"> 授权登录 </button>\n            </view>\n        </view>\n        <view v-else class=\"text-center\">\n            请升级微信版本\n        </view>\n    </view>\n</template>\n<script>\n    export default {\n        data() {\n          return {\n            sessionKey: '',\n            openId: '',\n            nickName: null,\n            avatarUrl: null,\n            userInfo:{},\n            canIUse: uni.canIUse('button.open-type.getUserInfo'),\n            canIGetUserProfile:false,\n          };\n        },\n        onLoad() {\n            var _this = this;\n            //console.log(uni.getUserProfile);\n            if( uni.getUserProfile ){  \n                this.canIGetUserProfile = true;  \n            }  \n            //判断若是版本不支持新版则采用旧版登录方式\n            //查看是否授权\n            if( !this.canIGetUserProfile){  \n                uni.getSetting({\n                    success: function(res) {\n                        if (res.authSetting['scope.userInfo']) {\n                            uni.getUserInfo({\n                              provider: 'weixin',\n                              success: function(res) {\n                                //console.log(res);\n                                _this.userInfo = res.userInfo;\n                                try {\n                                  _this.login();\n                                } catch (e) {}\n                              },\n                              fail(res) {}\n                            });\n                        } else {\n                            // 用户没有授权\n                            console.log('用户还没有授权');\n                        }\n                    }\n                });\n            }\n        },\n        onShow() {\n            \n        },\n        methods: {\n            //登录授权\n            bindGetUserInfo(e) {\n                var _this = this;\n                if(this.canIGetUserProfile){\n                    //新版登录方式\n                    uni.getUserProfile({\n                        desc:'登录',\n                        success:(res)=>{\n                            //console.log(res);\n                            _this.userInfo = res.userInfo;\n                            try {\n                                _this.login();\n                            } catch (e) {}\n                        },\n                        fail:(res)=>{\n                            console.log(res)\n                        }\n                    });\n                }else{\n                    //旧版登录方式\n                    if (e.detail.userInfo) {\n                        //用户按了允许授权按钮\n                        //console.log('手动');\n                        //console.log(e.detail.userInfo);\n                        _this.userInfo = e.detail.userInfo;\n                        try {\n                            _this.login();\n                        } catch (e) {}\n                    } else {\n                        console.log('用户拒绝了授权');\n                        //用户按了拒绝按钮\n                    }\n                }\n            },\n            //登录\n            login() {\n                let _this = this;\n                // 获取登录用户code\n                uni.login({\n                    provider: 'weixin',\n                    success: function(res) {\n                        //console.log(res);\n                        if(res.code){\n                           let code = res.code;\n                           //将用户登录code传递到后台置换用户SessionKey、OpenId等信息\n                           //...写用code置换SessionKey、OpenId的接口\n                            //置换成功调用登录方法_this.updateUserInfo();\n                        }else{\n                            uni.showToast({title: '登录失败！',duration: 2000});\n                            console.log('登录失败！' + res.errMsg)\n                        }\n                  },\n                });\n            },\n             //向后台更新信息\n            updateUserInfo() {\n                uni.showLoading({\n                    title: '登录中...'\n                });\n                let _this = this;\n                var params = {\n                    openId: _this.openId,\n                    nickName: _this.userInfo.nickName,\n                    avatarUrl: _this.userInfo.avatarUrl,\n                    gender: _this.userInfo.gender,\n                    city: _this.userInfo.city,\n                    province: _this.userInfo.province,\n                    country: _this.userInfo.country,\n                    unionId: '',\n                }\n                //console.log('登录');\n                //...后台登录的接口\n            }\n        }\n    }\n</script>\n"],"sourceRoot":""}